var messages=[];var socket;var tabActive=false;function renderChat(e,b){if(e===""){return}var a="Anonymous";var c=' <div class="row chatParent"> <div class="well well-sm anonymous"><div class="col-xs-3">  <!--span>Anonymous</span--><img src="./images/manager.png" class="img-circle" style="height:30px; width:30px;"> </div> <div class="col-xs-9"> <strong class="msgdiv">'+e+"</strong></div></div></div>";if(b=="right"){c='  <div class="row chatParent"><div class=" well well-sm you"> <div class="col-xs-9"> <strong class="msgdivYou">'+e+'</strong></div><div class="col-xs-2">  <img src="./images/employee.png" class="img-circle" style="height:30px; width:30px;"> <!--span>You</span--></div> </div></div>'}else{if(tabActive===false){c+='<audio src="./sound/ping.mp3" autoplay></audio>'}}$("#cid").append(c);$("html, body").animate({scrollTop:$(document).height()},1000)}function sendToServer(){var b=$("#msg").val();b=b.trim();$("#msg").val("");if(b===""){return}renderChat(b,"right");socket.emit("send",{message:encodeURIComponent(b)})}function sendMsg(a){if(a.keyCode==13){sendToServer()}}$(window).blur(function(){tabActive=false});$(window).focus(function(){tabActive=true});(function(){$("#myModal").modal({keyboard:false});messages=[];socket=io.connect();$("#myModal").modal("hide");$("#app").show();socket.on("message",function(a){if(a.message){messages.push(a.message);renderChat(decodeURIComponent(a.message),"left")}else{console.log("There is a problem:",a)}});socket.on("status",function(a){console.log(a);if(a==="0"){location.reload()}else{if(a==="1"){}else{if(a==="2"){$("#status").addClass("alert-success").removeClass("alert-info");$("#status")[0].innerHTML="<strong>User connected.</strong> Start chatting"}}}});$("#send").on("click",function(){sendToServer()})}());